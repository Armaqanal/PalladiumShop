{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="{{ csrf_token }}">

    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="{% static 'website/images/icons/favicon.png' %}"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/bootstrap/css/bootstrap.min.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{% static 'website/fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{% static 'website/fonts/iconic/css/material-design-iconic-font.min.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/fonts/linearicons-v1.0.0/icon-font.min.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/animate/animate.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/css-hamburgers/hamburgers.min.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/animsition/css/animsition.min.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/select2/select2.min.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/daterangepicker/daterangepicker.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/slick/slick.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/MagnificPopup/magnific-popup.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/vendor/perfect-scrollbar/perfect-scrollbar.css' %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static 'website/css/util.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'website/css/main.css' %}">
    <!--===============================================================================================-->
</head>
<body class="animsition">


<!-- header section starts -->
{% block header %}
    {% include 'website/sections/header_section.html' %}
{% endblock header %}
<!-- end header section -->


<!-- slider section -->
{% block slide-section %}
    {% include 'website/sections/slider_section.html' %}
{% endblock slide-section %}
<!-- end slider section -->

<!-- banner section -->
{% block banner %}
    {% include 'website/sections/banner_section.html' %}
{% endblock banner %}
<!-- end banner section -->

{#<div class="slider-container">#}
{#    {% block coursel %}#}
{#        <!-- companies coursel-->#}
{#        {% include 'products/companies_coursel.html' %}#}
{#        <!-- companies coursel -->#}
{#    {% endblock coursel %}#}
{#</div>#}


{#<!-- product section -->#}
{#{% block product %}#}
{#    {% include 'website/sections/product_section.html' %}#}
{#{% endblock product %}#}
{#<!-- product section -->#}





{% block content %}
    {% include 'website/pages/home.html' %}
{% endblock content %}



<!-- footer section -->
{% block footer %}
    {% include 'website/sections/footer_section.html' %}
{% endblock footer %}
<!-- footer section -->


<!-- Back to top -->
<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
</div>


<!--===============================================================================================-->
<script src="{% static 'website/vendor/jquery/jquery-3.2.1.min.js' %}"></script>
<!--===============================================================================================-->
<script src="{% static 'website/vendor/animsition/js/animsition.min.js' %}"></script>
<!--===============================================================================================-->
<script src="{% static 'website/vendor/bootstrap/js/popper.js' %}"></script>
<script src="{% static 'website/vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<!--===============================================================================================-->
<script src="{% static 'website/vendor/select2/select2.min.js' %}"></script>
<script>
    $(".js-select2").each(function () {
        $(this).select2({
            minimumResultsForSearch: 20,
            dropdownParent: $(this).next('.dropDownSelect2')
        });
    })
</script>

<!--===============================================================================================-->
<script src="{% static 'website/vendor/daterangepicker/moment.min.js' %}"></script>
<script src="{% static 'website/vendor/daterangepicker/daterangepicker.js' %}"></script>
<!--===============================================================================================-->
<script src="{% static 'website/vendor/slick/slick.min.js' %}"></script>
<script src="{% static 'website/js/slick-custom.js' %}"></script>
<!--===============================================================================================-->
<script src="{% static 'website/vendor/parallax100/parallax100.js' %}"></script>
<script>
    $('.parallax100').parallax100();
</script>
<!--===============================================================================================-->
<script src="{% static 'website/vendor/MagnificPopup/jquery.magnific-popup.min.js' %}"></script>
<script>
    $('.gallery-lb').each(function () { // the containers for all your galleries
        $(this).magnificPopup({
            delegate: 'a', // the selector for gallery item
            type: 'image',
            gallery: {
                enabled: true
            },
            mainClass: 'mfp-fade'
        });
    });
</script>
<!--===============================================================================================-->
<script src="{% static 'website/vendor/isotope/isotope.pkgd.min.js' %}"></script>
<!--===============================================================================================-->
{#<script src="{% static 'website/vendor/sweetalert/sweetalert.min.js' %}"></script>#}
{#<script>#}
{#    $('.js-addwish-b2').on('click', function (e) {#}
{#        e.preventDefault();#}
{#    });#}
{##}
{#    $('.js-addwish-b2').each(function () {#}
{#        var nameProduct = $(this).parent().parent().find('.js-name-b2').html();#}
{#        $(this).on('click', function () {#}
{#            swal(nameProduct, "is added to wishlist !", "success");#}
{##}
{#            $(this).addClass('js-addedwish-b2');#}
{#            $(this).off('click');#}
{#        });#}
{#    });#}
{##}
{#    $('.js-addwish-detail').each(function () {#}
{#        var nameProduct = $(this).parent().parent().parent().find('.js-name-detail').html();#}
{##}
{#        $(this).on('click', function () {#}
{#            swal(nameProduct, "is added to wishlist !", "success");#}
{##}
{#            $(this).addClass('js-addedwish-detail');#}
{#            $(this).off('click');#}
{#        });#}
{#    });#}
{##}
{##}
{##}
{#    /*---------------------------------------------*/#}
{##}
{#    $('.js-addcart-detail').each(function () {#}
{#        var nameProduct = $(this).parent().parent().parent().parent().find('.js-name-detail').html();#}
{#        $(this).on('click', function () {#}
{#            swal(nameProduct, "is added to cart !", "success");#}
{#        });#}
{#    });#}
{##}
{#</script>#}
<script src="{% static 'website/vendor/sweetalert/sweetalert.min.js' %}"></script>
<script src="{% static 'website/vendor/sweetalert/sweetalert.min.js' %}"></script>
<script>
    $(document).ready(function () {
        let ratingValue = 1; // Default rating is 1

        // Function to get the CSRF token from the cookie
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        const csrftoken = getCookie('csrftoken');

        // Show modal when heart is clicked
        $('.js-addwish-b2').on('click', function (e) {
            e.preventDefault();
            e.stopPropagation(); // Prevent event propagation
            const productId = $(this).data('product-id');
            $('#rateModal').data('product-id', productId).fadeIn();
        });

        // Handle star selection
        $('.star').on('click', function () {
            ratingValue = $(this).data('value');  // Get the selected rating value
            $(this).siblings().removeClass('selected');
            $(this).addClass('selected');
        });

        // Submit rating
        $('#submitRating').on('click', function (e) {
            e.preventDefault(); // Prevent the default button action
            e.stopPropagation(); // Prevent event propagation

            const productId = $('#rateModal').data('product-id');

            // Validate ratingValue
            if (ratingValue < 1 || ratingValue > 5) {
                swal('Error', 'Please select a valid rating', 'error');
                return;
            }

            $.ajax({
                url: '{% url "website:rate_product" %}',
                method: 'POST',
                headers: {
                    'X-CSRFToken': csrftoken
                },
                contentType: 'application/json',
                data: JSON.stringify({
                    'product_id': productId,
                    'rating': ratingValue
                }),
                dataType: 'json',
                success: function (response) {
                    $('#rateModal').fadeOut();

                    if (response.success) {
                        swal('Thank you!', 'Your rating has been submitted.', 'success');
                    } else {
                        swal('Error', response.error, 'error');
                    }
                },
                error: function (xhr, status, error) {
                    console.error('AJAX Error:', status, error);
                }
            });
        });

        // Close modal
        $('.close').on('click', function () {
            $('#rateModal').fadeOut();
        });
    });
</script>


<style>
    /* Modal Background */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0, 0, 0, 0.5); /* Black background with opacity */
    }

    /* Modal Content */
    .modal-content {
        background-color: #fefefe;
        margin: 15% auto; /* 15% from top and centered */
        padding: 20px;
        border: 1px solid #888;
        width: 80%; /* Could be more or less, depending on screen size */
        max-width: 500px; /* Maximum width of the modal */
    }

    /* Close Button */
    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }

    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
    }

    /* Rating Stars */
    .rating {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
    }

    .star {
        font-size: 24px;
        cursor: pointer;
        margin: 0 5px;
    }

    .selected {
        color: gold;
    }

    /* Button Style */
    .modal-btn {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 10px 2px;
        cursor: pointer;
    }

    .modal-btn:hover {
        background-color: #45a049; /* Darker green */
    }
</style>


<!--===============================================================================================-->
<script src="{% static 'website/vendor/perfect-scrollbar/perfect-scrollbar.min.js' %}"></script>
<script>
    $('.js-pscroll').each(function () {
        $(this).css('position', 'relative');
        $(this).css('overflow', 'hidden');
        var ps = new PerfectScrollbar(this, {
            wheelSpeed: 1,
            scrollingThreshold: 1000,
            wheelPropagation: false,
        });

        $(window).on('resize', function () {
            ps.update();
        })
    });
</script>

<script>

    document.querySelectorAll('.block2-btn').forEach(element => {
        console.log('Event listeners for:', element);
        console.log(getEventListeners(element));
    });

</script>
<!--===============================================================================================-->
<script src="{% static 'website/js/main.js' %}"></script>
<script>
    var addToCartUrl = "{% url 'orders:add' %}";
</script>
<script src="{% static 'website/js/script.js' %}"></script>


</body>
</html>
